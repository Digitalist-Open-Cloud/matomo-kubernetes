changeCause: "should only be used as example"
namespace: matomo
nginxWorkerProcesses: 5
matomo:
  image: registry.wklive.net:5000/matomo/base:4-6-2-php7-4-27-fpm-alpine3-15-cc7da716
  runAsUser: 82
  installCommand: ./console plugin:activate ExtraTools && ./console matomo:install --install-file=/tmp/matomo/install.json --force --do-not-drop-db
  license:
    secretKeyRef:
      name: matomo-license
      key: matomo-license
  ingress:
    enabled: true
    annotations:
      digitalist-net-services.org: "matomo"
      kubernetes.io/ingress.class: "nginx"
  cli:
    replicas: 1
    enabled: true
  cronJobs:
    coreArchive:
      labels:
        name: matomo-jobs-corearchive
        instance: matomo-af
        version: "1"
        component: cronjob
        partOf: matomo
        managedBy: helm
      schedule: "1 1 1 1 1"
      activeDeadlineSeconds: 43200
      command: ./console core:archive --disable-scheduled-tasks
      resources:
        requests:
          memory: 128Mi
          cpu: 100m
        limits:
          memory: 512Mi
          cpu: 700m
    scheduledTasks:
      labels:
        name: matomo-jobs-scheduled-tasks
        instance: matomo-af
        version: "1"
        component: cronjob
        partOf: matomo
        managedBy: helm
      schedule: "1 1 1 1 1"
      activeDeadlineSeconds: 43200
      command: ./console scheduled-tasks:run
      resources:
        requests:
          memory: 128Mi
          cpu: 100m
        limits:
          memory: 512Mi
          cpu: 700m
  dashboard:
    sidecars: []
    # sidecars:
    # - name: fpm-metrics
    #   image: hipages/php-fpm_exporter:2.0.4
    #   imagePullPolicy: IfNotPresent
    #   resources:
    #     limits:
    #       cpu: 500m
    #       memory: 256Mi
    #     requests:
    #       cpu: 40m
    #       memory: 32Mi
    enabled: true
    replicas: 1
    loadbalancer: false
    hostname: localhost
    tls: false
    firstuser:
      username: admin
      password: admin123
      email: foo@example.com
  phpfpm:
    tracker: true
  queuedTrackingMonitor:
    enabled: true
  queuedTrackingProcess:
    replicas: 1
  tracker:
    replicas: 1
    hostname: localhost
    tls: false
    loadbalancer: false
tracker:
  phpfpm:
    type: ondemand
    max_children: 75
    process_idle_timeout: 600s
    max_requests: 500
nginx:
  image: registry.wklive.net:5000/services/nginx-geoip2-naxsi:1.21.6
  runAsUser: 100
db:
  hostname: matomo-db-mysql
  password:
    secretKeyRef:
      name: matomo-db-mysql
      key: mysql-root-password
  name: matomo
  username: root
  prefix: matomo_
xdebug:
  disabled: 1
extraSecrets:
  create: false
  data: {}
# * secrets need to base64 encoded.
#  data:
#    name: Zm9vCg==
#    bar: YmFyCg==
extraServices: {}
#  - name: foo
    ## Service port type
#    type: ClusterIP
    ## Service protocol
#    protocol: TCP
    ## The container target port
#    containerPort: 12001
    ## The service port
#    port: 12001
#    selector:
#      app: matomo-dashboard
    ## The node port (only relevant for type LoadBalancer or NodePort)
#    nodePort:
    ## The cluster ip address (only relevant for type LoadBalancer or NodePort)
#    clusterIP:
    ## The loadbalancer ip address (only relevant for type LoadBalancer)
#    loadBalancerIP:
extraConfigMaps:
  create: true
  data: {}
# data:
#   my.ini: |
#     extension=foo.so
#     foo.socket=tcp://bar:9309
extraVolumes: []
# extraVolumes:
# - name: mySecretVolume
#   secret:
#     secretName: matomo-extra-secrets
# - name: my.ini
#   configMap:
#     name: matomo-additional-config-maps
#     items:
#     - key: "my.ini"
#       path: "my.ini"
extraVolumeMounts: []
# extraVolumeMounts:
# - name: mySecretVolume
#   mountPath: /foo/secrets/mySecretVolume/
# - name: my.ini
#   mountPath: /usr/local/etc/php/conf.d/my.ini
#   subPath: my.ini